{% extends 'utsida/layout.html' %}
<button type="button" class="btn btn-secondary"
        data-container="body" data-toggle="popover" data-placement="top" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">
  Popover on top
</button>
{% block content %}
    {% load result_extras %}

    <div id="selectedCourseContainer" class="panel panel-primary square-corners boxShadow selectedCourseContainer">
        <div id="handle" class="panel-heading square-corners">
            Dine valgte fag
            <span class="badge" id="numSelectedCoursesBadge"></span>
            <span id="selectedCourseToggleBtn" onclick="courseSelector.toggleSelectedCourses()" class="pull-right glyphicon glyphicon-chevron-up"></span>
        </div>
        <div id="selectedCourseBody" class="panel-body">
            <ul id="selectedCourseList"></ul>
        </div>
        <div id="selectedCourseFooter" class="panel-footer">
            <button onclick="courseSelector.removeAllSelectedCourses()" class="btn btn-default"><span class="glyphicon glyphicon-trash"></span> Tøm listen</button>
            <button onclick="courseSelector.saveCourses()" class="btn btn-default pull-right">
                <span class="glyphicon glyphicon-ok"></span>
                Lagre fag
            </button>
        </div>
    </div>




    <div id="filters" class="row vertical-space-bottom-big">
        <h2 class="text-center">Her er turene som likner mest på din situasjon.</h2>
        <h3 class="subTitle text-center vertical-space-bottom-big">
            Trykk på knappene under for å filtrere på universitet, og legg til fag du ønsker å ta ved å trykke på de.
            Du finner dine lagrede fag i <span class="italic">Lagrede fag</span> under profilen din.
        </h3>

        <div class="col-md-8 col-md-offset-2">
            <a href="/process/result/all"><button class="btn btn-default vertical-space-bottom-small">All</button></a>
            {% for university in universities %}
                <a href="/process/result/{{ university }}"><button class="btn btn-default vertical-space-bottom-small">{{ university }}</button></a>
            {% endfor %}
        </div>
    </div>

    <div id="results" class="row vertical-space-top-big">

        {% for case in similar_cases %}
            {% if forloop.counter|divisibleby:3 %}<div class="row">{% endif %}
            <div class="col-md-4">
                <div class="panel panel-primary square-corners boxShadow">
                    <div class="panel-heading square-corners">
                        <span class="resultPanelUniversity">{{ case.University }} ({{ case.Country }})</span> <span class="pull-right badge">{{ case.Similarity }}</span>
                    </div>
                    <div class="panel-body">
                        <div class="subjectsContainer">
                            {% for subject in case.Subjects %}
                                {% if subject in matches.keys %}
                                    <div onclick="courseSelector.addCourse(this)" class="btn btn-success courseBtn">{{ subject }} - {{matches | get:subject}}</div>

                                {% else %}
                                    <div onclick="courseSelector.addCourse(this)" class="btn btn-warning courseBtn">{{ subject }}</div>
                                {% endif %}
                            {% endfor %}
                        </div>

                        <hr>

                        <div class="hiddenInformation">
                            <div>
                                <p><span class="bold">Institutt hjemme:</span> {{ case.Institute }}</p>
                                <p><span class="bold">Verdensdel:</span> {{ case.Continent }}</p>
                                <p><span class="bold">Land:</span> {{ case.Country }}</p>
                                <p><span class="bold">Universitet:</span> {{ case.University }}</p>
                                <p><span class="bold">Studiespråk:</span> {{ case.Language }}</p>
                                <p><span class="bold">Studieperiode:</span> {{ case.StudyPeriod }}</p>
                                <p><span class="bold">Vurdering av akademisk kvalitet:</span> {{ case.AcademicQuality }}</p>
                                <p><span class="bold">Vurdering av sosial kvalitet:</span> {{ case.SocialQuality}}</p>
                            </div>
                        </div>
                        <div class="text-center">
                            <span id="expandTripChevron" style="color: #337ab7; cursor: pointer;" class="accordion glyphicon glyphicon-chevron-down"></span>
                        </div>
                    </div>
                </div>
            </div>
            {% if forloop.counter|divisibleby:3 %}</div>{% endif %}
        {% endfor %}

        <button class="btn btn-success boxShadow square-corners checkoutBtn" onclick="courseSelector.checkout()">Gå til lagrede fag <span class="glyphicon glyphicon-chevron-right"></span></button>
    </div>

    {% load staticfiles %}
    <script src="{% static 'utsida/javascripts/result/showHiddenContent.js' %}"></script>
    <script src="{% static 'utsida/javascripts/result/universityHighlighter.js' %}"></script>
    <script src="{% static 'utsida/javascripts/result/courseSelector.js' %}"></script>




{% endblock %}

