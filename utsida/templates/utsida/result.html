{% extends 'utsida/layout.html' %}

{% block content %}

    <h2 class="text-center">Søker etter matcher med følgende attributter</h2>
    <div class="well vertical-space-top">
        <ul>
            <li>Institutt hjemme: <span id="institute" style="font-weight: bold">{{ form.data.homeInstitute }}</span></li>
            <li>Verdensdel: <span id="continent" style="font-weight: bold">{{ form.data.continent }}</span></li>
            <li>Land: <span id="country" style="font-weight: bold">{{ form.data.country }}</span></li>
            <li>Universitet: <span id="university" style="font-weight: bold">{{ form.data.university }}</span></li>
            <li>Studiespråk: <span id="language" style="font-weight: bold">{{ form.data.language }}</span></li>
            <li>Studieår: <span id="studyPeriod" style="font-weight: bold">{{ form.data.studyPeriod }}</span></li>
            <li>Akademisk kvalitet: <span id="academicQuality" style="font-weight: bold">{{ form.data.academicQualityRating }}</span></li>
            <li>Sosial kvalitet: <span id="socialQuality" style="font-weight: bold">{{ form.data.socialQualityRating }}</span></li>
        </ul>
    </div>

    <img id="loader" src="../../static/utsida/images/loading.gif" style="width:20%; display: block; margin: auto">

    <div id="results" class="row vertical-space-top-big" style="display: none">

        <h2 class="text-center vertical-space-bottom-big">Her er de tre beste matchene dine</h2>

        <div class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    UCSB <span class="pull-right" style="font-weight: bold">90%</span>
                </div>
                <div class="panel-body">
                    <ul>
                        <li>MECH7878</li>
                        <li>CS9090</li>
                        <li>INFO5678</li>
                        <li>CS1010</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    Ausburg College <span class="pull-right" style="font-weight: bold">82%</span>
                </div>
                <div class="panel-body">
                    <ul>
                        <li>CS4220</li>
                        <li>IT1882</li>
                        <li>TEC9019</li>
                        <li>ECO8787</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    Texas Tech University <span class="pull-right" style="font-weight: bold">75%</span>
                </div>
                <div class="panel-body">
                    <ul>
                        <li>CS7878</li>
                        <li>IT0998</li>
                        <li>TECH6767</li>
                        <li>ECO6767</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <script>
        var loader = document.getElementById("loader");
        var result = document.getElementById("results");
        setTimeout(function(){
            loader.style.display = "none";
            result.style.display = "block";
        }, 3000);

        $(document).ready(function() {
            var institute = $("#institute")[0].innerHTML;
            var continent = $("#continent")[0].innerHTML;
            var country = $("#country")[0].innerHTML;
            var university = $("#university")[0].innerHTML;
            var language = $("#language")[0].innerHTML;
            var studyPeriod = $("#studyPeriod")[0].innerHTML;
            var academicQuality = $("#academicQuality")[0].innerHTML;
            var socialQuality = $("#socialQuality")[0].innerHTML;

            /*
            $.ajax("http://localhost:8080/retrieval?" +
                    "casebase=main_case_base&" +
                    "concept%20name=Trip&Symbol%20" +
                    "attribute%20name=Language&value=" + language + "&String%20" +
                    "attribute%20name=Country&value=" + country + "&Symbol%20" +
                    "attribute%20name=Institute&value=" + institute + "&Symbol%20" +
                    "attribute%20name=Continent&value=" + continent + "&Symbol%20" +
                    "attribute%20name=University&value=" + university + "&Integer%20" +
                    "attribute%20name=SocialQuality&value=" + socialQuality + "&Integer%20" +
                    "attribute%20name=AcademicQuality&value=" + academicQuality + "&Integer%20" +
                    "attribute%20name=StudyPeriod&value=" + studyPeriod)
                    .done(function(result) {
                       console.log(result.similarCases);
                    });
            */
            $.ajax("http://localhost:8080/retrieval?" +
                    "casebase=main_case_base&" +
                    "concept%20name=Trip&Symbol%20" +
                    "attribute%20name=Continent&value=" + continent)
                    .done(function(res) {
                        console.log(res.similarCases)
                    });


        });
    </script>

{% endblock %}

